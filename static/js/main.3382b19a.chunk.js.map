{"version":3,"sources":["general-functions.js","components/MainBox.js","components/App.js","index.js"],"names":["getRandomInt","min","max","Math","ceil","floor","random","MainBox","useState","artSearchResults","setSearchResults","artEntry","setArtEntry","backgroundImageUrl","setBackgroundImageUrl","showFailure","setShowFailure","showSuccess","setShowSuccess","showHint","setShowHint","displayCorrectAnswer","document","getElementById","innerHTML","data","style_title","loadSearchResults","fullSearchQuery","Promise","resolve","console","log","fetch","then","r","json","loadArtEntry","id","loadNewBackgroundImage","entry","completeURL","config","iiif_url","image_id","url","loadingWrapper","a","selectedEntry","length","all","overlay","addEventListener","onAnimationEndCallback","removeEventListener","classList","remove","add","values","image","querySelectorAll","forEach","b","blur","useEffect","rawSearchResults","searchResults","preference","pagination","filter","item","date_start","info","license_links","version","newEntry","fetchMyAPI","onanimationstart","e","animationName","onanimationend","className","Container","fluid","style","maxWidth","backgroundImage","Toast","bsPrefix","onClose","show","delay","autohide","Body","Row","Col","title","artist_display","onClick","type","placeholder","decision","value","toLowerCase","answerIsCorrect","App","ReactDOM","render"],"mappings":"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","file":"static/js/main.3382b19a.chunk.js","sourcesContent":["export function getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { getRandomInt } from '../general-functions'\r\nimport { Container, Row, Col, Button, Toast } from 'react-bootstrap'\r\nimport MusicPlayer from './MusicPlayer'\r\n// import dict from '../../node_modules/japanese-json/kana.json'\r\n\r\nconst MainBox = () => {\r\n    const [artSearchResults, setSearchResults] = useState(null)\r\n    const [artEntry, setArtEntry] = useState(null)\r\n    const [backgroundImageUrl, setBackgroundImageUrl] = useState(null)\r\n\r\n    // Toasts\r\n    const [showFailure, setShowFailure] = useState(false)\r\n    const [showSuccess, setShowSuccess] = useState(false)\r\n    const [showHint, setShowHint] = useState(false)\r\n\r\n    const answerIsCorrect = () => {\r\n        const userAnswer = document.getElementById('input-answer').value.toLowerCase()\r\n        const correctAnswer = artEntry.data.style_title.toLowerCase()\r\n        const decision = userAnswer === correctAnswer\r\n        document.getElementById('input-answer').value = \"\"\r\n        return decision\r\n    }\r\n\r\n    const reactOnUserAnswer = () => {\r\n        if (answerIsCorrect()) {\r\n            // display toast with congratulations\r\n            displayCorrectAnswer()\r\n            setShowSuccess(true)\r\n        } else {\r\n            // display toast with 'Try again'\r\n            setShowFailure(true)\r\n        }\r\n    }\r\n\r\n    const displayCorrectAnswer = () => {\r\n        // document.getElementById(\"hint\").innerHTML = `${artEntry.data.style_title}<br>${artEntry.data.title}${artEntry.data.artist_display}`\r\n        document.getElementById(\"hint-style\").innerHTML = `${artEntry.data.style_title}`\r\n    }\r\n\r\n    const displayQuestion = () => {\r\n        document.getElementById(\"hint-style\").innerHTML = `Какой это стиль живописи?`\r\n    }\r\n\r\n    const blurButtons = () => {\r\n        [...document.querySelectorAll('button')].forEach(b => b.blur())\r\n    }\r\n\r\n    const fadeInAnimation = () => {\r\n        return new Promise((resolve) => {\r\n            const overlay = document.getElementById(\"overlay\");\r\n            const onAnimationEndCallback = () => {\r\n                overlay.removeEventListener('animationend', onAnimationEndCallback);\r\n                resolve(\"Animation ended, callback function removed\");\r\n            }\r\n\r\n            overlay.addEventListener('animationend', onAnimationEndCallback)\r\n            overlay.classList.remove(\"fadeout\")\r\n            overlay.classList.add(\"fadein\")\r\n        })\r\n    }\r\n\r\n    const loadSearchResults = (fullSearchQuery) => {\r\n        return new Promise((resolve) => {\r\n            console.log(\"Search is being performed ...\")\r\n            fetch(`https://api.artic.edu/api/v1/artworks/search?query[term][is_public_domain]=true&${fullSearchQuery}`)\r\n                // fetch(\"https://api.artic.edu/api/v1/artworks/search?q=cat&query[term][is_public_domain]=true&limit=100&fields=id,title,image_id,style_title\")\r\n                .then(r => r.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    resolve(data)\r\n                })\r\n        })\r\n    }\r\n\r\n    const loadArtEntry = (id) => {\r\n        return new Promise((resolve) => {\r\n            console.log(\"Art entry is being fetched ...\")\r\n            fetch(`https://api.artic.edu/api/v1/artworks/${id}`)\r\n                .then(r => r.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    resolve(data)\r\n                })\r\n        })\r\n    }\r\n\r\n    const loadNewBackgroundImage = (entry) => {\r\n        const baseURL = entry.config.iiif_url + `/`\r\n        const id = entry.data.image_id\r\n        const imageSettings = `/full/843,/0/default.jpg`\r\n        const completeURL = baseURL + id + imageSettings\r\n\r\n        return new Promise((resolve) => {\r\n            console.log(\"Image is being fetched...\")\r\n            fetch(completeURL)\r\n                .then(r => {\r\n                    // setBackgroundImageUrl(r.url)\r\n                    console.log(r.url)\r\n                    resolve(r.url)\r\n                })\r\n        })\r\n    }\r\n\r\n    const loadingWrapper = async () => {\r\n        setShowHint(false)\r\n        setShowSuccess(false)\r\n\r\n        const selectedEntry = artSearchResults.data[getRandomInt(1, artSearchResults.data.length)]\r\n        const values = await Promise.all([fadeInAnimation(), loadArtEntry(selectedEntry.id)])\r\n        console.log(values[1])\r\n\r\n        const image = await loadNewBackgroundImage(values[1])\r\n        console.log(image)\r\n\r\n        displayQuestion()\r\n        blurButtons()\r\n\r\n        console.log(values[1].data.style_title)\r\n        setArtEntry(values[1])\r\n        setBackgroundImageUrl(image)\r\n\r\n        document.getElementById(\"overlay\").classList.remove(\"fadein\")\r\n        document.getElementById(\"overlay\").classList.add(\"fadeout\")\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function fetchMyAPI() {\r\n            const fullSearchQuery = `limit=100&fields=id,date_start,style_title`\r\n            const rawSearchResults = await loadSearchResults(fullSearchQuery)\r\n            console.log(rawSearchResults)\r\n            const searchResults = {\r\n                \"preference\": rawSearchResults.preference,\r\n                \"pagination\": rawSearchResults.pagination,\r\n                \"data\": rawSearchResults.data.filter(item => item.date_start >=1000 && item.style_title !== null),\r\n                \"info\": rawSearchResults.info,\r\n                \"license_links\": rawSearchResults.license_links,\r\n                \"version\": rawSearchResults.version,\r\n            }\r\n            setSearchResults(searchResults)\r\n            console.log(artSearchResults)\r\n            console.log(searchResults)\r\n            const selectedEntry = searchResults.data[getRandomInt(1, searchResults.data.length)]\r\n            const newEntry = await loadArtEntry(selectedEntry.id)\r\n            console.log(newEntry)\r\n            console.log(newEntry.data.style_title)\r\n            setArtEntry(newEntry)\r\n\r\n            const image = await loadNewBackgroundImage(newEntry)\r\n            console.log(image)\r\n            setBackgroundImageUrl(image)\r\n\r\n            document.getElementById(\"overlay\").classList.remove(\"fadein\")\r\n            document.getElementById(\"overlay\").classList.add(\"fadeout\")\r\n        }\r\n        fetchMyAPI()\r\n\r\n        const overlay = document.getElementById(\"overlay\")\r\n        overlay.onanimationstart = (e) => {\r\n            console.log(`Start of ${e.animationName} animation`)\r\n            // return new Promise(resolve => resolve(`Start of ${e.animationName} animation`))\r\n        }\r\n\r\n        overlay.onanimationend = (e) => {\r\n            // return new Promise(resolve => resolve(`End of ${e.animationName} animation`))\r\n            console.log(`End of ${e.animationName} animation`)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div id=\"flex-wrapper\">\r\n            <header className=\"bg-dark text-center\">\r\n                <Container fluid className=\"d-flex h-100 text-center\" style={{ maxWidth: \"700px\" }}>\r\n                    {/* <Row>\r\n                        <Col>\r\n                            <h4 id=\"hint-title\"></h4>\r\n                        </Col>\r\n                    </Row> */}\r\n                    \r\n                            <h3 id=\"hint-style\" className=\"m-auto\">Какой это стиль живописи?</h3>\r\n                    \r\n                    {/* <Row>\r\n                        <Col>\r\n                            <h4 id=\"hint-artist\"></h4>\r\n                        </Col>\r\n                    </Row> */}\r\n                </Container>\r\n\r\n            {/* <h4 lang=\"ja-jp\" className=\"p-1\">{artEntry ? artEntry.data.title : \"...\"}</h4>\r\n            <h4 id=\"hint\" style={{ opacity: \"0\" }} className=\"p-1 mb-5\">{artEntry ? artEntry.data.style_title : \"...\"}</h4>\r\n                Какой это стиль живописи? */}\r\n        </header>\r\n            <main id=\"box\" className=\"text-center center-all text-white\" style={{ backgroundImage: `url(${backgroundImageUrl})` }}>\r\n                <Toast bsPrefix=\"toast toast-semi-transparent\" onClose={() => setShowFailure(false)} show={showFailure} delay={5000} autohide>\r\n                    <Toast.Body>Эээ... не совсем.<br/>Может, попробуйте еще раз?</Toast.Body>\r\n                </Toast>\r\n                <Toast bsPrefix=\"toast toast-semi-transparent\" onClose={() => setShowSuccess(false)} show={showSuccess}>\r\n                    <Toast.Body>\r\n                        <Row>\r\n                            <Col>\r\n                                <h5>Поздравляем! Это правильный ответ!</h5>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <h4 id=\"hint-artist\">{artEntry ? artEntry.data.title : \"...\"}</h4>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <Row>\r\n                            <Col>\r\n                                <h4 id=\"hint-title\">{artEntry ? artEntry.data.artist_display : \"...\"}</h4>\r\n                            </Col>\r\n                        </Row>    \r\n                    </Toast.Body>\r\n                </Toast>\r\n\r\n                <Toast bsPrefix=\"toast toast-semi-transparent\" onClose={() => setShowHint(false)} show={showHint}>\r\n                    <Toast.Body>\r\n                        <Row>\r\n                            <Col>\r\n                                <h5>Вот правильный ответ:</h5>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <h4 id=\"hint-artist\">{artEntry ? artEntry.data.title : \"...\"}</h4>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <Row>\r\n                            <Col>\r\n                                <h4 id=\"hint-title\">{artEntry ? artEntry.data.artist_display : \"...\"}</h4>\r\n                            </Col>\r\n                        </Row>    \r\n                    </Toast.Body>\r\n                </Toast>\r\n\r\n                <div id=\"overlay\" className=\"text-center center-all japan-spirit display-4\">\r\n                    <h3 className=''>\r\n                        Угадай<br />Стиль<br />Живописи\r\n                    </h3>\r\n                    {/* <p>japan<br />spirit</p>\r\n                    <svg className=\"rising-sun\" width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <circle cx=\"100\" cy=\"100\" r=\"100\" fill=\"darkred\" />\r\n                    </svg> */}\r\n                </div>\r\n                <button className=\"kc_fab_main_btn\" onClick={() => {\r\n                    setShowHint(true);\r\n                    displayCorrectAnswer();\r\n                }}>?</button>\r\n            </main>\r\n            <footer className=\"bg-dark\">\r\n                <Container fluid style={{ maxWidth: \"700px\" }}>\r\n                    <Row>\r\n                        <Col>\r\n                            <input type=\"text\" id=\"input-answer\" placeholder=\"Введите ответ ...\" />\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col>\r\n                            <button className=\"btn btn btn-secondary btn-block mb-2\" onClick={reactOnUserAnswer}>\r\n                                Ответить\r\n                            </button>\r\n                        </Col>\r\n                        <Col>\r\n                            <button className=\"btn btn btn-secondary btn-block mb-2\" onClick={() => {\r\n                                    loadingWrapper()\r\n                                    // loadNewHieroglyphEntry()\r\n                                    // loadNewBackgroundImage()\r\n                                }}>\r\n                                Дальше\r\n                            </button>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </footer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MainBox","import React from 'react'\r\nimport MainBox from './MainBox'\r\n\r\nconst App = () => {\r\n    return (\r\n        <MainBox />\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './components/App'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n    <App />,\r\n    document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}